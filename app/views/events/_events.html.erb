<style>

  #close {
    width: 50%;
    margin: 0 auto;
    margin-bottom: 10px;
  }

  .instructions {
    text-align: center;
    margin: 15px;
    width: 38%;
    display: inline-block;
    font-weight: 500;
  }

  .modal-backdrop {
    background-color: rgba(0,0,0,0.8) !important;
  }

  .row_events {
    border-top: 1px solid #ccc;
    height: 70px;
    padding-top: 20px;
    padding-bottom: 0px;
    position: relative;
  }

  .event_header {
    font-size: 1em;
    overflow: visible;
    white-space: nowrap;
  }

  .event_date {
    font-size: .70em;
    font-weight: 500;
  }

  .location {
    font-size: .70em;
    font-weight: 500;
  }

  #column2 {
    margin-top: -20px;
  }

  .event_photo_index {
    max-height: 90px;
    max-width: 60px;
    padding-top: 15px;
    pointer-events: none;
  }

  ul#col1 {
    /*background-color: red;*/
    list-style-type: none;
  }

  ul#col2 {
    /*background-color: blue;*/
    height: 70px;
    list-style-type: none;
  }

  #column2 {
    padding-left: 0px;
    /*padding-right: 0px;*/
  }

  #column1 {
    padding-right: 0px;
  }

  .btn.btn-default {
    margin: 0 auto;
    display: block;
    width: auto !important;
  }

/*jquery mobile test*/
  html, body { padding: 0; margin: 0; }
  html, .ui-mobile, .ui-mobile body {
    height: 105px;
  }
  .ui-mobile, .ui-mobile .ui-page {
    min-height: 105px;
  }

  div.box {
    width: 30em;
    height: 3em;
    background-color: #108040;
  }
  
  div.event_wrapper.swipeleft {
    background-color: rgb(238, 103, 89) !important;
  }

  div.box.swipeleft {
    background-color: #7ACEF4;
  }

  div.event_wrapper.swiperight {
    background-color: rgb(255, 194, 137) !important;
  }

  .ui-content {
    padding-left: 5px;
    padding-right: 5px;
  }

</style>

<div class="ad">
  <div class="photo">
  </div>
  <div class="date">
    <span class="month">
      JUN<br>
    </span>
    18
  </div>
  <div class="location">
    6:00-9:00pm at YouTube Space LA
    <br>
    12422 West Bluff Creek Drive, Los Angeles, CA
  </div>
</div>

<div data-role="main" class="container-fluid content ui-content">
  <% @events.each do |event| %>
  <div class="event_wrapper <%=event.id%>">
     <div class="row row_events">
      <div class="col-md-6 col-sm-6 col-xs-6" id="column1">
        <ul id="col1" style="padding-left: 0px">
          <li class="event_header"><%= link_to truncate(event.name, length: 45, separator: ' '), event_path(event) %></li>
          <li class="location"><%= truncate(event.venue, length: 25) %> <%= truncate(event.city, length: 15) %></li>
          <li class="event_date"><%#= date_converter(event.date) %>
           <%= event.event_date.strftime('%a, %b %d, %Y - %l:%M %p') %></li>
        </ul>
      </div>
      <div class="col-md-4 col-sm-4 col-xs-4 btn-group" style="margin-top: 25px">
        <button type="button" class="btn btn-default likebutton"><span class="glyphicon glyphicon-thumbs-up"></span></button>
        <button type="button" class="btn btn-default dislikebutton"><span class="glyphicon glyphicon-thumbs-down"></span></button>
      </div>
      <div class="col-md-2 col-sm-2 col-xs-2" id="column2">
        <%= image_tag("Icon_final.png", :class => "event_photo_index text-centered") %>
        <!-- <img src="<%#= event.group_photo %>" class="event_photo_index text-centered"> -->
      </div>
    </div>
  </div>
  <% end %>
</div>
<!-- End of Event Listing container -->

<!-- Favorite Function -->
<script>
// $(".likebutton").click(function(){
//   $(this).toggleClass('yellow');
//   });
</script>

  
<script>
$(document).ready(function(){

  function swipeleftHandler( event ){
    console.log("dislike");
    $( event.target ).parents(".event_wrapper").addClass( "swipeleft" ).delay( 800 ).fadeOut( "slow" );
  }

  // function swipeleftHandler(){
  //   console.log("test");
  // }

  $( ".dislikebutton" ).on( "click", swipeleftHandler );

  $( ".likebutton" ).on( "click", swiperightHandler );
  function swiperightHandler( event ){
    $( event.target ).parents(".event_wrapper").toggleClass( "yellow" );
    var event_wrapper = $(event.target).closest(".event_wrapper");
    var info = event_wrapper.find(event)
    var num = parseInt(info.context.classList[1])
    checkCookie(num);
    alert(info.context.innerText + " has been saved")
  }
});

</script>

<script>
var matches = []
var d = document.getElementsByClassName('event_wrapper');
for (var i=0; i<d.length; i++) {
  var id = parseInt(d[i].classList[1])
  if (document.cookie.indexOf('id' + id)!= -1) {
    d[i].className += " yellow";
    matches.push(id);
  }
}
</script>


