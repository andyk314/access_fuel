<style>
	input.rsvp {
		border: 1px solid blue;
		border-radius: 5px;
		padding: 5px 0px;
		background-color: white;
		border: white;
		text-shadow: white;
		box-shadow: none;
	}

	.rsvp:hover {
		background: color: black;
		color: white;
	}

	.fa-users, .rsvp_badge, .fa-calendar, .fa-heart {
		color: black;
	}
	
	/*.fa {
		font-size: 1.4em;
		margin-top: 3px;
	}*/

	.RSVP-modal {
		font-size: 1.4em;
		margin-top: 3px;
	}

	button.fa-calendar{
		margin-top: .1em;
		font-size: 1.65em;
		box-shadow: none;
		border: white;
		background-color: none;
		text-shadow: white;
	}

	.ui-page-theme-a .ui-btn{
		background-color:white;
		.ui-btn:hover {
			background-color:black;
			color:white;
		}
	}

	.ui-input-btn {
		background-color: none;
		border: white;
	}

	.ui-btn.ui-input-btn.ui-corner-all.ui-shadow {
		width: 100%;
	}

	#whole_thang {
		padding-left: 15px;
		padding-right: 15px;
		padding-top: 5%;
		padding-bottom: 5%;
	}

	img {
		border: none;
	}

	.modal-content {
		color: black;
		background: white;
		min-height: 200px;
		text-align: left;
		width: 85%;
		margin: 0 auto;
	}

	.RSVP-style {
		margin-bottom: -10px;
		margin-top: 10px;
		font-size: 1.5em;
	}

 	.modal-backdrop {
		background-color: transparent !important;
	}

	.rsvp {
		font-size: 3em;
		margin-left: -21px;
	}

	.show-container-margintop {
		margin-top: 15px;
	}

	.hosted_by {
		margin-top: 15px;
	}

	.container-show {
		background-color: rgba(248, 146, 49, 0.4);
		margin-top: 10%;
	}

</style>

<!-- Container for event photo and description -->
<div id="whole_thang">
	<section class="description">
		<div class="container-fluid" style="padding: 0px;">
			<div class="row group_photo_row">
				<div class="col-md-12 text-center contain">
					<img src="<%= @event.group_photo %>" class="group_photo">
				</div>
			</div>

		<!-- Bottom Fixed Navigation -->
		<nav id="bottom_nav" style="border-top: 1px solid #ccc">
		  <div class="container show-container-margintop">
				 <div class="row">
					<div class="col-xs-4">
					<%start_time = @event.event_date.utc.strftime('%Y%m%dT%H%M00Z')%>
					<%new_time = @event.event_date.utc + 1.hour %>
					<%end_time = new_time.strftime('%Y%m%dT%H%M00Z')%>
						<p style="margin: 0px;"><button class="fa fa-calendar" onclick="window.open('https://www.google.com/calendar/render?action=TEMPLATE&text=Your+ <%=@event.name%> &dates=<%=start_time%>/<%=end_time%>&details=For+details,+link+here:+<%=@event.url%>&location=<%=@event.venue%>&sf=true&output=xml', '_blank')"></button>
							<!-- <i class="fa fa-heart"></i> -->
						</p>
					</div>
					<div class="col-xs-4 rsvp-class">
						<% if @event.url.present? %>
							<%= button_to "RSVP", @event.url, class: "rsvp", target: "_blank" %>
						<% else %>
							<%= button_to "RSVP", event_path(@event), class: "rsvp" %>
						<% end %>
					</div>
					<div class="col-xs-4 text-right">
						<p>
							<button data-toggle="modal" data-target=".rsvp-modal-lg"><i class="fa fa-users RSVP-modal"></i>
							<i class="rsvp_badge"> <%= @rsvp_count %> </i></button>
						</p>
						<div class="modal fade rsvp-modal-lg" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
						  <div class="modal-dialog modal-lg">
						    <div class="modal-content">
						      <p class="text-center RSVP-style">RSVP Attendees</p><hr>
						      <ol><% @rsvp_names.each do |name| %>
						      	<li><%= name %></li>
										<% end %>
						      </ol>
						    </div>
						  </div>
						</div>
					</div>
				</div>
		  </div>
		</nav>
		<div class="container-show">
		<div class="row">
			<div class="col-md-12 text-center">
			<h1 class="event_name text-center" data-toggle="collapse" data-target="#demo"><%= @event.name %></h1>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 event_details">
				<p class="text-center">
				<%= @event.event_date.strftime('%a, %b %d @ %l:%M %p') %></p>
				<p class="text-center hosted_by">Hosted by <%= @event.group %></p>
				<p class="text-center"><%= @event.venue %> <%= @event.city %></p>
			</div>
		</div>
		</div>
		<div class="row">
			<div class="col-md-12 event_description">
				<%= truncate(strip_tags(@event.description), length: 500) %>
				<%= link_to events_path do %>
    			<i class="glyphicon glyphicon-home home"></i>
				<% end %>
				<!-- <span class="glyphicon glyphicon-home home"><%= link_to events_path %></span> -->
			</div>
		</div>
	</section>
</div>

<!-- #### Script for Favorite function -->
<script>
$(".glyphicon-star.index").click(function(){
	$(this).toggleClass('yellow');
	});
</script>

<!-- Left Swipe - older events -->
<script>
$('#whole_thang').on('swipeleft', function(){
	var url = 'http://accessfuel.herokuapp.com/events/'
	// var url = 'http://localhost:3000/events/'
	console.log(url)
	var current_id = <%= params[:id] %>
	first = <%= Event.first.id %>
	last = <%= Event.last.id %>
	if(current_id == last) {
		window.location.replace(url)
	}
	else {
		var new_id = String(current_id + 1)
		window.location.replace(url + new_id)
	}
})
</script>

<!-- Right Swipe - newer events -->
<script>
$('#whole_thang').on('swiperight', function(){
	var url = 'http://accessfuel.herokuapp.com/events/'
	// var url = 'http://localhost:3000/events/'
	console.log(url)
	var current_id = <%= params[:id] %>
	console.log(current_id)
	first = <%= Event.first.id %>
	last = <%= Event.last.id %>
	if(current_id == first) {
		window.location.replace(url)
	}
	else {
		var new_id = String(current_id - 1)
		window.location.replace(url + new_id)
	}
})
</script>

<script>
	$('.rsvp-modal-lg').click.modal()
</script>


